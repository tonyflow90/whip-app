<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="../bower_components/paper-toast/paper-toast.html">


<dom-module id="el-gyroscope">
  <template>
    <style>
      :host {
        display: block;
      }

      paper-toast {
        background-color: red;
        width: 100vw;
      }
    </style>

    <paper-toast id="toast" duration="0">
    </paper-toast>
  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class ElGyroscope extends Polymer.Element {
      static get is() { return 'el-gyroscope'; }
      static get properties() {
        return {
          xAxis: {
            type: Number,
            readOnly: true,
            reflectToAttribute: true,
            notify: true
          },
          yAxis: {
            type: Number,
            readOnly: true,
            reflectToAttribute: true,
            notify: true
          },
          zAxis: {
            type: Number,
            readOnly: true,
            reflectToAttribute: true,
            notify: true
          }
        };
      }

      ready() {
        super.ready();

        if (window.DeviceMotionEvent) {
          window.addEventListener('devicemotion', this.deviceMotionListener.bind(this), false);
        }
        else {
          const toast = document.querySelector('paper-toast');
          this.$.toast.textContent = "devicemotion not supported on your device or browser.";
          this.$.toast.open();
        }
      }

      deviceMotionListener(event) {
        this._setXAxis(event.acceleration.x != null || event.acceleration.x != undefined ? event.acceleration.x : 0);
        this._setYAxis(event.acceleration.y != null || event.acceleration.y != undefined ? event.acceleration.y : 0);
        this._setZAxis(event.acceleration.z != null || event.acceleration.z != undefined ? event.acceleration.z : 0);

        // if(event.acceleration.x > 2 && event.acceleration.y > 2 ) {
        //   alert('DRIN');
        // }

        // // Acceleration
        // console.log(event.acceleration.x);
        // console.log(event.acceleration.y);
        // console.log(event.acceleration.z);

        // // Acceleration including gravity
        // console.log(event.accelerationIncludingGravity.x);
        // console.log(event.accelerationIncludingGravity.y);
        // console.log(event.accelerationIncludingGravity.z);

        // // Rotation rate
        // console.log(event.rotationRate.alpha);
        // console.log(event.rotationRate.beta);
        // console.log(event.rotationRate.gamma);
      }
    }

    window.customElements.define(ElGyroscope.is, ElGyroscope);
  </script>
</dom-module>