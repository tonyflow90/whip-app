<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"></head><body><dom-module id="el-audio"><template><style>:host{display:block;}</style></template><script>class ElAudio extends Polymer.Element{static get is(){return'el-audio'}static get properties(){return{active:{type:Boolean,value:!1,readOnly:!0,reflectToAttribute:!0,notify:!0},url:{type:String},timeout:{type:Number,value:1e3},audioBuffer:{type:Object,readOnly:!0}}}ready(){super.ready(),window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=new AudioContext;fetch(this.url).then((a)=>a.arrayBuffer()).then((b)=>a.decodeAudioData(b)).then((a)=>{this._setAudioBuffer(a)})}playSound(){this._setActive(!0),this._play(this.audioBuffer)}_play(a){window.AudioContext=window.AudioContext||window.webkitAudioContext;var b=new AudioContext;const c=b.createBufferSource();c.buffer=a,c.connect(b.destination),c.start(),setTimeout(()=>{c.stop(),this._setActive(!1)},this.timeout)}_playTestSound(){this._setActive(!0),window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=new AudioContext,b=a.createOscillator();b.frequency.value=200,b.connect(a.destination),b.start(0),setTimeout(()=>{b.stop(0),this._setActive(!1)},this.timeout)}}window.customElements.define(ElAudio.is,ElAudio);</script></dom-module>(function () { 'use strict'; const URL = 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/123941/Yodel_Sound_Effect.mp3'; const context = new AudioContext(); const playButton = document.querySelector('#play'); let yodelBuffer; window.fetch(URL) .then(response =&gt; response.arrayBuffer()) .then(arrayBuffer =&gt; context.decodeAudioData(arrayBuffer)) .then(audioBuffer =&gt; { playButton.disabled = false; yodelBuffer = audioBuffer; }); playButton.onclick = () =&gt; play(yodelBuffer); function play(audioBuffer) { const source = context.createBufferSource(); source.buffer = audioBuffer; source.connect(context.destination); source.start(); } }());</body></html>